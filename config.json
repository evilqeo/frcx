#!/bin/bash

cd /tmp

# Install dependencies
if command -v apt >/dev/null 2>&1; then
    sudo apt update
    sudo apt install -y wget unzip
elif command -v dnf >/dev/null 2>&1; then
    sudo dnf install -y wget unzip
elif command -v apk >/dev/null 2>&1; then
    sudo apk add wget unzip
else
    echo "Unsupported package manager"
    exit 1
fi

# Download SRBMiner-Multi v2.3.9 (latest Linux release as of mid-2024)
wget https://github.com/doktor83/SRBMiner-Multi/releases/download/2.3.9/SRBMiner-Multi-2-3-9-Linux.zip -O SRBMiner.zip

unzip SRBMiner.zip
cd SRBMiner-Multi-2-3-9

# Set pool and wallet
POOL="pool.hashvault.pro:443"
WALLET="49AU9MTsMCYfJ6gAz1MmXu2nLVxkjQcowB1Dri75SegNNY6auiA9RS9QmAECDTn9Ra8YuSG362boJ6kA79C4VB8AHkfEbm7"

# Start mining
./SRBMiner-MULTI --algorithm randomx --pool $POOL --wallet $WALLET --password x --tls
